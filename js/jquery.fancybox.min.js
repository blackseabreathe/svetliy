//fancy-box3
(function(k,m,g,d){if(!g){return}if(g.fn.fancybox){g.error("fancyBox already initialized");return}var f={loop:false,margin:[44,0],gutter:50,keyboard:true,arrows:true,infobar:false,toolbar:true,buttons:["slideShow","fullScreen","thumbs","close"],idleTime:false,smallBtn:"auto",protect:false,modal:false,image:{preload:"auto",},ajax:{settings:{data:{fancybox:true}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:true,css:{},attr:{scrolling:"auto"}},animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><button data-fancybox-prev title="Назад" class="fancybox-button fancybox-button--left"></button><div class="fancybox-infobar__body"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><button data-fancybox-next title="Вперед" class="fancybox-button fancybox-button--right"></button></div><div class="fancybox-toolbar">{{BUTTONS}}</div><div class="fancybox-navigation"><button data-fancybox-prev title="Назад" class="fancybox-arrow fancybox-arrow--left" /><button data-fancybox-next title="Вперед" class="fancybox-arrow fancybox-arrow--right" /></div><div class="fancybox-stage"></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}<p></div>',btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"></button>',fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="На весь экран"></button>',thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="Закрыть"></button>',smallBtn:'<button data-fancybox-close class="fancybox-close-small" title="Закрыть"></button>'},parentEl:"body",autoFocus:true,backFocus:true,trapFocus:true,fullScreen:{autoStart:false,},touch:{vertical:true,momentum:true},hash:null,media:{},slideShow:{autoStart:false,speed:4000},thumbs:{autoStart:false,hideOnClose:true},onInit:g.noop,beforeLoad:g.noop,afterLoad:g.noop,beforeShow:g.noop,afterShow:g.noop,beforeClose:g.noop,afterClose:g.noop,onActivate:g.noop,onDeactivate:g.noop,clickContent:function(p,o){return p.type==="image"?"zoom":false},clickSlide:"close",clickOutside:"close",dblclickContent:false,dblclickSlide:false,dblclickOutside:false,mobile:{clickContent:function(p,o){return p.type==="image"?"toggleControls":false},clickSlide:function(p,o){return p.type==="image"?"toggleControls":"close"},dblclickContent:function(p,o){return p.type==="image"?"zoom":false},dblclickSlide:function(p,o){return p.type==="image"?"zoom":false}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails"},de:{CLOSE:"Schliessen",NEXT:"Weiter",PREV:"ZurÃ¼ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es spÃ¤ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder"}}};var l=g(k);var i=g(m);var n=0;var j=function(o){return o&&o.hasOwnProperty&&o instanceof g};var c=(function(){return k.requestAnimationFrame||k.webkitRequestAnimationFrame||k.mozRequestAnimationFrame||k.oRequestAnimationFrame||function(o){return k.setTimeout(o,1000/60)}})();var a=(function(){var o,p=m.createElement("fakeelement");var q={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(o in q){if(p.style[o]!==d){return q[o]}}})();var e=function(o){return(o&&o.length&&o[0].offsetHeight)};var b=function(r,q,p){var o=this;o.opts=g.extend(true,{index:p},f,q||{});if(q&&g.isArray(q.buttons)){o.opts.buttons=q.buttons}o.id=o.opts.id||++n;o.group=[];o.currIndex=parseInt(o.opts.index,10)||0;o.prevIndex=null;o.prevPos=null;o.currPos=0;o.firstRun=null;o.createGroup(r);if(!o.group.length){return}o.$lastFocus=g(m.activeElement).blur();o.slides={};o.init(r)};g.extend(b.prototype,{init:function(){var o=this;var r,s,p;var q=o.group[o.currIndex].opts;o.scrollTop=i.scrollTop();o.scrollLeft=i.scrollLeft();if(!g.fancybox.getInstance()&&!g.fancybox.isMobile&&g("body").css("overflow")!=="hidden"){r=g("body").width();g("html").addClass("fancybox-enabled");r=g("body").width()-r;if(r>1){g("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar, .fancybox-enabled body { margin-right: '+r+"px; }</style>")}}p="";g.each(q.buttons,function(t,u){p+=(q.btnTpl[u]||"")});s=g(o.translate(o,q.baseTpl.replace("{{BUTTONS}}",p))).addClass("fancybox-is-hidden").attr("id","fancybox-container-"+o.id).addClass(q.baseClass).data("FancyBox",o).prependTo(q.parentEl);o.$refs={container:s};["bg","inner","infobar","toolbar","stage","caption"].forEach(function(t){o.$refs[t]=s.find(".fancybox-"+t)});if(!q.arrows||o.group.length<2){s.find(".fancybox-navigation").remove()}if(!q.infobar){o.$refs.infobar.remove()}if(!q.toolbar){o.$refs.toolbar.remove()}o.trigger("onInit");o.activate();o.jumpTo(o.currIndex)},translate:function(p,q){var o=p.opts.i18n[p.opts.lang];return q.replace(/\{\{(\w+)\}\}/g,function(r,t){var s=o[t];if(s===d){return r}return s})},createGroup:function(q){var p=this;var o=g.makeArray(q);g.each(o,function(v,z){var t={},s={},u=[],y,x,r,w;if(g.isPlainObject(z)){t=z;s=z.opts||z}else{if(g.type(z)==="object"&&g(z).length){y=g(z);u=y.data();s="options" in u?u.options:{};s=g.type(s)==="object"?s:{};t.src="src" in u?u.src:(s.src||y.attr("href"));["width","height","thumb","type","filter"].forEach(function(A){if(A in u){s[A]=u[A]}});if("srcset" in u){s.image={srcset:u.srcset}}s.$orig=y;if(!t.type&&!t.src){t.type="inline";t.src=z}}else{t={type:"html",src:z+""}}}t.opts=g.extend(true,{},p.opts,s);if(g.fancybox.isMobile){t.opts=g.extend(true,{},t.opts,t.opts.mobile)}x=t.type||t.opts.type;r=t.src||"";if(!x&&r){if(r.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)){x="image"}else{if(r.match(/\.(pdf)((\?|#).*)?$/i)){x="pdf"}else{if(r.charAt(0)==="#"){x="inline"}}}}t.type=x;t.index=p.group.length;if(t.opts.$orig&&!t.opts.$orig.length){delete t.opts.$orig}if(!t.opts.$thumb&&t.opts.$orig){t.opts.$thumb=t.opts.$orig.find("img:first")}if(t.opts.$thumb&&!t.opts.$thumb.length){delete t.opts.$thumb}if(g.type(t.opts.caption)==="function"){t.opts.caption=t.opts.caption.apply(z,[p,t])}else{if("caption" in u){t.opts.caption=u.caption}}t.opts.caption=t.opts.caption===d?"":t.opts.caption+"";if(x==="ajax"){w=r.split(/\s+/,2);if(w.length>1){t.src=w.shift();t.opts.filter=w.shift()}}if(t.opts.smallBtn=="auto"){if(g.inArray(x,["html","inline","ajax"])>-1){t.opts.toolbar=false;t.opts.smallBtn=true}else{t.opts.smallBtn=false}}if(x==="pdf"){t.type="iframe";t.opts.iframe.preload=false}if(t.opts.modal){t.opts=g.extend(true,t.opts,{infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:false,clickSlide:false,clickOutside:false,dblclickContent:false,dblclickSlide:false,dblclickOutside:false})}p.group.push(t)})},addEvents:function(){var o=this;o.removeEvents();o.$refs.container.on("click.fb-close","[data-fancybox-close]",function(p){p.stopPropagation();p.preventDefault();o.close(p)}).on("click.fb-prev touchend.fb-prev","[data-fancybox-prev]",function(p){p.stopPropagation();p.preventDefault();o.previous()}).on("click.fb-next touchend.fb-next","[data-fancybox-next]",function(p){p.stopPropagation();p.preventDefault();o.next()});l.on("orientationchange.fb resize.fb",function(p){if(p&&p.originalEvent&&p.originalEvent.type==="resize"){c(function(){o.update()})}else{o.$refs.stage.hide();setTimeout(function(){o.$refs.stage.show();o.update()},500)}});i.on("focusin.fb",function(q){var p=g.fancybox?g.fancybox.getInstance():null;if(p.isClosing||!p.current||!p.current.opts.trapFocus||g(q.target).hasClass("fancybox-container")||g(q.target).is(m)){return}if(p&&g(q.target).css("position")!=="fixed"&&!p.$refs.container.has(q.target).length){q.stopPropagation();p.focus();l.scrollTop(o.scrollTop).scrollLeft(o.scrollLeft)}});i.on("keydown.fb",function(r){var q=o.current,p=r.keyCode||r.which;if(!q||!q.opts.keyboard){return}if(g(r.target).is("input")||g(r.target).is("textarea")){return}if(p===8||p===27){r.preventDefault();o.close(r);return}if(p===37||p===38){r.preventDefault();o.previous();return}if(p===39||p===40){r.preventDefault();o.next();return}o.trigger("afterKeydown",r,p)});if(o.group[o.currIndex].opts.idleTime){o.idleSecondsCounter=0;i.on("mousemove.fb-idle mouseenter.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(){o.idleSecondsCounter=0;if(o.isIdle){o.showControls()}o.isIdle=false});o.idleInterval=k.setInterval(function(){o.idleSecondsCounter++;if(o.idleSecondsCounter>=o.group[o.currIndex].opts.idleTime){o.isIdle=true;o.idleSecondsCounter=0;o.hideControls()}},1000)}},removeEvents:function(){var o=this;l.off("orientationchange.fb resize.fb");i.off("focusin.fb keydown.fb .fb-idle");this.$refs.container.off(".fb-close .fb-prev .fb-next");if(o.idleInterval){k.clearInterval(o.idleInterval);o.idleInterval=null}},previous:function(o){return this.jumpTo(this.currPos-1,o)},next:function(o){return this.jumpTo(this.currPos+1,o)},jumpTo:function(x,p,r){var z=this,v,q,u,s,o,t,y;var w=z.group.length;if(z.isSliding||z.isClosing||(z.isAnimating&&z.firstRun)){return}x=parseInt(x,10);q=z.current?z.current.opts.loop:z.opts.loop;if(!q&&(x<0||x>=w)){return false}v=z.firstRun=(z.firstRun===null);if(w<2&&!v&&!!z.isSliding){return}s=z.current;z.prevIndex=z.currIndex;z.prevPos=z.currPos;u=z.createSlide(x);if(w>1){if(q||u.index>0){z.createSlide(x-1)}if(q||u.index<w-1){z.createSlide(x+1)}}z.current=u;z.currIndex=u.index;z.currPos=u.pos;z.trigger("beforeShow",v);z.updateControls();t=g.fancybox.getTranslate(u.$slide);u.isMoved=(t.left!==0||t.top!==0)&&!u.$slide.hasClass("fancybox-animated");u.forcedDuration=d;if(g.isNumeric(p)){u.forcedDuration=p}else{p=u.opts[v?"animationDuration":"transitionDuration"]}p=parseInt(p,10);if(v){if(u.opts.animationEffect&&p){z.$refs.container.css("transition-duration",p+"ms")}z.$refs.container.removeClass("fancybox-is-hidden");e(z.$refs.container);z.$refs.container.addClass("fancybox-is-open");$('body').addClass('no-scroll');u.$slide.addClass("fancybox-slide--current");z.loadSlide(u);z.preload();return}g.each(z.slides,function(B,A){g.fancybox.stop(A.$slide)});u.$slide.removeClass("fancybox-slide--next fancybox-slide--previous").addClass("fancybox-slide--current");if(u.isMoved){o=Math.round(u.$slide.width());g.each(z.slides,function(B,A){var C=A.pos-u.pos;g.fancybox.animate(A.$slide,{top:0,left:(C*o)+(C*A.opts.gutter)},p,function(){A.$slide.removeAttr("style").removeClass("fancybox-slide--next fancybox-slide--previous");if(A.pos===z.currPos){u.isMoved=false;z.complete()}})})}else{z.$refs.stage.children().removeAttr("style")}if(u.isLoaded){z.revealContent(u)}else{z.loadSlide(u)}z.preload();if(s.pos===u.pos){return}y="fancybox-slide--"+(s.pos>u.pos?"next":"previous");s.$slide.removeClass("fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous");s.isComplete=false;if(!p||(!u.isMoved&&!u.opts.transitionEffect)){return}if(u.isMoved){s.$slide.addClass(y)}else{y="fancybox-animated "+y+" fancybox-fx-"+u.opts.transitionEffect;g.fancybox.animate(s.$slide,y,p,function(){s.$slide.removeClass(y).removeAttr("style")})}},createSlide:function(r){var o=this;var q;var p;p=r%o.group.length;p=p<0?o.group.length+p:p;if(!o.slides[r]&&o.group[p]){q=g('<div class="fancybox-slide"></div>').appendTo(o.$refs.stage);o.slides[r]=g.extend(true,{},o.group[p],{pos:r,$slide:q,isLoaded:false,});o.updateSlide(o.slides[r])}return o.slides[r]},scaleToActual:function(B,z,r){var E=this;var t=E.current;var v=t.$content;var u,p,o,D,C;var q=parseInt(t.$slide.width(),10);var s=parseInt(t.$slide.height(),10);var A=t.width;var w=t.height;if(!(t.type=="image"&&!t.hasError)||!v||E.isAnimating){return}g.fancybox.stop(v);E.isAnimating=true;B=B===d?q*0.5:B;z=z===d?s*0.5:z;u=g.fancybox.getTranslate(v);D=A/u.width;C=w/u.height;p=(q*0.5-A*0.5);o=(s*0.5-w*0.5);if(A>q){p=u.left*D-((B*D)-B);if(p>0){p=0}if(p<q-A){p=q-A}}if(w>s){o=u.top*C-((z*C)-z);if(o>0){o=0}if(o<s-w){o=s-w}}E.updateCursor(A,w);g.fancybox.animate(v,{top:o,left:p,scaleX:D,scaleY:C},r||330,function(){E.isAnimating=false});if(E.SlideShow&&E.SlideShow.isActive){E.SlideShow.stop()}},scaleToFit:function(s){var p=this;var r=p.current;var q=r.$content;var o;if(!(r.type=="image"&&!r.hasError)||!q||p.isAnimating){return}g.fancybox.stop(q);p.isAnimating=true;o=p.getFitPos(r);p.updateCursor(o.width,o.height);g.fancybox.animate(q,{top:o.top,left:o.left,scaleX:o.width/q.width(),scaleY:o.height/q.height()},s||330,function(){p.isAnimating=false})},getFitPos:function(s){var y=this;var u=s.$content;var v=s.width;var w=s.height;var q=s.opts.margin;var p,r,t,o,x;if(!u||!u.length||(!v&&!w)){return false}if(g.type(q)==="number"){q=[q,q]}if(q.length==2){q=[q[0],q[1],q[0],q[1]]}if(l.width()<800){q=[0,0,0,0]}p=parseInt(y.$refs.stage.width(),10)-(q[1]+q[3]);r=parseInt(y.$refs.stage.height(),10)-(q[0]+q[2]);t=Math.min(1,p/v,r/w);o=Math.floor(t*v);x=Math.floor(t*w);return{top:Math.floor((r-x)*0.5)+q[0],left:Math.floor((p-o)*0.5)+q[3],width:o,height:x}},update:function(){var o=this;g.each(o.slides,function(q,p){o.updateSlide(p)})},updateSlide:function(o){var p=this;var q=o.$content;if(q&&(o.width||o.height)){g.fancybox.stop(q);g.fancybox.setTranslate(q,p.getFitPos(o));if(o.pos===p.currPos){p.updateCursor()}}o.$slide.trigger("refresh");p.trigger("onUpdate",o)},updateCursor:function(p,q){var o=this;var r;var s=o.$refs.container.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut");if(!o.current||o.isClosing){return}if(o.isZoomable()){s.addClass("fancybox-is-zoomable");if(p!==d&&q!==d){r=p<o.current.width&&q<o.current.height}else{r=o.isScaledDown()}if(r){s.addClass("fancybox-can-zoomIn")}else{if(o.current.opts.touch){s.addClass("fancybox-can-drag")}else{s.addClass("fancybox-can-zoomOut")}}}else{if(o.current.opts.touch){s.addClass("fancybox-can-drag")}}},isZoomable:function(){var p=this;var q=p.current;var o;if(!q||p.isClosing){return}if(q.type==="image"&&q.isLoaded&&!q.hasError&&(q.opts.clickContent==="zoom"||(g.isFunction(q.opts.clickContent)&&q.opts.clickContent(q)==="zoom"))){o=p.getFitPos(q);if(q.width>o.width||q.height>o.height){return true}}return false},isScaledDown:function(){var o=this;var r=o.current;var p=r.$content;var q=false;if(p){q=g.fancybox.getTranslate(p);q=q.width<r.width||q.height<r.height}return q},canPan:function(){var o=this;var r=o.current;var p=r.$content;var q=false;if(p){q=o.getFitPos(r);q=Math.abs(p.width()-q.width)>1||Math.abs(p.height()-q.height)>1}return q},loadSlide:function(p){var q=this,r,s;var o;if(p.isLoading){return}if(p.isLoaded){return}p.isLoading=true;q.trigger("beforeLoad",p);r=p.type;s=p.$slide;s.off("refresh").trigger("onReset").addClass("fancybox-slide--"+(r||"unknown")).addClass(p.opts.slideClass);switch(r){case"image":q.setImage(p);break;case"iframe":q.setIframe(p);break;case"html":q.setContent(p,p.src||p.content);break;case"inline":if(g(p.src).length){q.setContent(p,g(p.src))}else{q.setError(p)}break;case"ajax":q.showLoading(p);o=g.ajax(g.extend({},p.opts.ajax.settings,{url:p.src,success:function(t,u){if(u==="success"){q.setContent(p,t)}},error:function(t,u){if(t&&u!=="abort"){q.setError(p)}}}));s.one("onReset",function(){o.abort()});break;default:q.setError(p);break}return true},setImage:function(s){var v=this;var q=s.opts.image.srcset;var w,t,u,p;if(q){u=k.devicePixelRatio||1;p=k.innerWidth*u;t=q.split(",").map(function(y){var x={};y.trim().split(/\s+/).forEach(function(A,z){var B=parseInt(A.substring(0,A.length-1),10);if(z===0){return(x.url=A)}if(B){x.value=B;x.postfix=A[A.length-1]}});return x});t.sort(function(y,x){return y.value-x.value});for(var r=0;r<t.length;r++){var o=t[r];if((o.postfix==="w"&&o.value>=p)||(o.postfix==="x"&&o.value>=u)){w=o;break}}if(!w&&t.length){w=t[t.length-1]}if(w){s.src=w.url;if(s.width&&s.height&&w.postfix=="w"){s.height=(s.width/s.height)*w.value;s.width=w.value}}}s.$content=g('<div class="fancybox-image-wrap"></div>').addClass("fancybox-is-hidden").appendTo(s.$slide);if(s.opts.preload!==false&&s.opts.width&&s.opts.height&&(s.opts.thumb||s.opts.$thumb)){s.width=s.opts.width;s.height=s.opts.height;s.$ghost=g("<img />").one("error",function(){g(this).remove();s.$ghost=null;v.setBigImage(s)}).one("load",function(){v.afterLoad(s);v.setBigImage(s)}).addClass("fancybox-image").appendTo(s.$content).attr("src",s.opts.thumb||s.opts.$thumb.attr("src"))}else{v.setBigImage(s)}},setBigImage:function(o){var p=this;var q=g("<img />");o.$image=q.one("error",function(){p.setError(o)}).one("load",function(){clearTimeout(o.timouts);o.timouts=null;if(p.isClosing){return}o.width=this.naturalWidth;o.height=this.naturalHeight;if(o.opts.image.srcset){q.attr("sizes","100vw").attr("srcset",o.opts.image.srcset)}p.hideLoading(o);if(o.$ghost){o.timouts=setTimeout(function(){o.timouts=null;o.$ghost.hide()},Math.min(300,Math.max(1000,o.height/1600)))}else{p.afterLoad(o)}}).addClass("fancybox-image").attr("src",o.src).appendTo(o.$content);if(q[0].complete){q.trigger("load")}else{if(q[0].error){q.trigger("error")}else{o.timouts=setTimeout(function(){if(!q[0].complete&&!o.hasError){p.showLoading(o)}},100)}}},setIframe:function(o){var p=this,q=o.opts.iframe,s=o.$slide,r;o.$content=g('<div class="fancybox-content'+(q.preload?" fancybox-is-hidden":"")+'"></div>').css(q.css).appendTo(s);r=g(q.tpl.replace(/\{rnd\}/g,new Date().getTime())).attr(q.attr).appendTo(o.$content);if(q.preload){p.showLoading(o);r.on("load.fb error.fb",function(t){this.isReady=1;o.$slide.trigger("refresh");p.afterLoad(o)});s.on("refresh.fb",function(){var u=o.$content,x,y,w,t,v;if(r[0].isReady!==1){return}try{x=r.contents();y=x.find("body")}catch(z){}if(y&&y.length&&!(q.css.width!==d&&q.css.height!==d)){w=r[0].contentWindow.document.documentElement.scrollWidth;t=Math.ceil(y.outerWidth(true)+(u.width()-w));v=Math.ceil(y.outerHeight(true));u.css({width:q.css.width===d?t+(u.outerWidth()-u.innerWidth()):q.css.width,height:q.css.height===d?v+(u.outerHeight()-u.innerHeight()):q.css.height})}u.removeClass("fancybox-is-hidden")})}else{this.afterLoad(o)}r.attr("src",o.src);if(o.opts.smallBtn===true){o.$content.prepend(p.translate(o,o.opts.btnTpl.smallBtn))}s.one("onReset",function(){try{g(this).find("iframe").hide().attr("src","//about:blank")}catch(t){}g(this).empty();o.isLoaded=false})},setContent:function(o,q){var p=this;if(p.isClosing){return}p.hideLoading(o);o.$slide.empty();if(j(q)&&q.parent().length){q.parent(".fancybox-slide--inline").trigger("onReset");o.$placeholder=g("<div></div>").hide().insertAfter(q);q.css("display","inline-block")}else{if(!o.hasError){if(g.type(q)==="string"){q=g("<div>").append(g.trim(q)).contents();if(q[0].nodeType===3){q=g("<div>").html(q)}}if(o.opts.filter){q=g("<div>").html(q).find(o.opts.filter)}}}o.$slide.one("onReset",function(){if(o.$placeholder){o.$placeholder.after(q.hide()).remove();o.$placeholder=null}if(o.$smallBtn){o.$smallBtn.remove();o.$smallBtn=null}if(!o.hasError){g(this).empty();o.isLoaded=false}});o.$content=g(q).appendTo(o.$slide);if(o.opts.smallBtn&&!o.$smallBtn){o.$smallBtn=g(p.translate(o,o.opts.btnTpl.smallBtn)).appendTo(o.$content)}this.afterLoad(o)},setError:function(o){o.hasError=true;o.$slide.removeClass("fancybox-slide--"+o.type);this.setContent(o,this.translate(o,o.opts.errorTpl))},showLoading:function(o){var p=this;o=o||p.current;if(o&&!o.$spinner){o.$spinner=g(p.opts.spinnerTpl).appendTo(o.$slide)}},hideLoading:function(o){var p=this;o=o||p.current;if(o&&o.$spinner){o.$spinner.remove();delete o.$spinner}},afterLoad:function(o){var p=this;if(p.isClosing){return}o.isLoading=false;o.isLoaded=true;p.trigger("afterLoad",o);p.hideLoading(o);if(o.opts.protect&&o.$content&&!o.hasError){o.$content.on("contextmenu.fb",function(q){if(q.button==2){q.preventDefault()}return true});if(o.type==="image"){g('<div class="fancybox-spaceball"></div>').appendTo(o.$content)}}p.revealContent(o)},revealContent:function(s){var v=this;var r=s.$slide;var w,u,p,t,q,o=false;w=s.opts[v.firstRun?"animationEffect":"transitionEffect"];p=s.opts[v.firstRun?"animationDuration":"transitionDuration"];p=parseInt(s.forcedDuration===d?p:s.forcedDuration,10);if(s.isMoved||s.pos!==v.currPos||!p){w=false}if(w==="zoom"&&!(s.pos===v.currPos&&p&&s.type==="image"&&!s.hasError&&(o=v.getThumbPos(s)))){w="fade"}if(w==="zoom"){q=v.getFitPos(s);q.scaleX=Math.round((q.width/o.width)*100)/100;q.scaleY=Math.round((q.height/o.height)*100)/100;delete q.width;delete q.height;t=s.opts.zoomOpacity;if(t=="auto"){t=Math.abs(s.width/s.height-o.width/o.height)>0.1}if(t){o.opacity=0.1;q.opacity=1}g.fancybox.setTranslate(s.$content.removeClass("fancybox-is-hidden"),o);e(s.$content);g.fancybox.animate(s.$content,q,p,function(){v.complete()});return}v.updateSlide(s);if(!w){e(r);s.$content.removeClass("fancybox-is-hidden");if(s.pos===v.currPos){v.complete()}return}g.fancybox.stop(r);u="fancybox-animated fancybox-slide--"+(s.pos>v.prevPos?"next":"previous")+" fancybox-fx-"+w;r.removeAttr("style").removeClass("fancybox-slide--current fancybox-slide--next fancybox-slide--previous").addClass(u);s.$content.removeClass("fancybox-is-hidden");e(r);g.fancybox.animate(r,"fancybox-slide--current",p,function(x){r.removeClass(u).removeAttr("style");if(s.pos===v.currPos){v.complete()}},true)},getThumbPos:function(p){var q=this;var t=false;var r=function(y){var x=y[0];var w=x.getBoundingClientRect();var v=[];var z;while(x.parentElement!==null){if(g(x.parentElement).css("overflow")==="hidden"||g(x.parentElement).css("overflow")==="auto"){v.push(x.parentElement.getBoundingClientRect())}x=x.parentElement}z=v.every(function(A){var C=Math.min(w.right,A.right)-Math.max(w.left,A.left);var B=Math.min(w.bottom,A.bottom)-Math.max(w.top,A.top);return C>0&&B>0});return z&&w.bottom>0&&w.right>0&&w.left<g(k).width()&&w.top<g(k).height()};var u=p.opts.$thumb;var s=u?u.offset():0;var o;if(s&&u[0].ownerDocument===m&&r(u)){o=q.$refs.stage.offset();t={top:s.top-o.top+parseFloat(u.css("border-top-width")||0),left:s.left-o.left+parseFloat(u.css("border-left-width")||0),width:u.width(),height:u.height(),scaleX:1,scaleY:1}}return t},complete:function(){var o=this;var q=o.current;var p={};if(q.isMoved||!q.isLoaded||q.isComplete){return}q.isComplete=true;q.$slide.siblings().trigger("onReset");e(q.$slide);q.$slide.addClass("fancybox-slide--complete");g.each(o.slides,function(s,r){if(r.pos>=o.currPos-1&&r.pos<=o.currPos+1){p[r.pos]=r}else{if(r){g.fancybox.stop(r.$slide);r.$slide.unbind().remove()}}});o.slides=p;o.updateCursor();o.trigger("afterShow");if(g(m.activeElement).is("[disabled]")||(q.opts.autoFocus&&!(q.type=="image"||q.type==="iframe"))){o.focus()}},preload:function(){var o=this;var p,q;if(o.group.length<2){return}p=o.slides[o.currPos+1];q=o.slides[o.currPos-1];if(p&&p.type==="image"){o.loadSlide(p)}if(q&&q.type==="image"){o.loadSlide(q)}},focus:function(){var p=this.current;var o;if(this.isClosing){return}o=p&&p.isComplete?p.$slide.find("button,:input,[tabindex],a").filter(":not([disabled]):visible:first"):null;o=o&&o.length?o:this.$refs.container;o.focus()},activate:function(){var o=this;g(".fancybox-container").each(function(){var p=g(this).data("FancyBox");if(p&&p.uid!==o.uid&&!p.isClosing){p.trigger("onDeactivate")}});if(o.current){if(o.$refs.container.index()>0){o.$refs.container.prependTo(m.body)}o.updateControls()}o.trigger("onActivate");o.addEvents()},close:function(t,v){var x=this;var u=x.current;var y,q;var w,s,o,p;var r=function(){x.cleanUp(t)};if(x.isClosing){return false}x.isClosing=true;if(x.trigger("beforeClose",t)===false){x.isClosing=false;c(function(){x.update()});return false}x.removeEvents();if(u.timouts){clearTimeout(u.timouts)}w=u.$content;y=u.opts.animationEffect;q=g.isNumeric(v)?v:(y?u.opts.animationDuration:0);u.$slide.off(a).removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated");u.$slide.siblings().trigger("onReset").remove();if(q){x.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing")}x.hideLoading(u);$('body').removeClass('no-scroll');x.hideControls();x.updateCursor();if(y==="zoom"&&!(t!==true&&w&&q&&u.type==="image"&&!u.hasError&&(p=x.getThumbPos(u)))){y="fade"}if(y==="zoom"){g.fancybox.stop(w);o=g.fancybox.getTranslate(w);o.width=o.width*o.scaleX;o.height=o.height*o.scaleY;s=u.opts.zoomOpacity;if(s=="auto"){s=Math.abs(u.width/u.height-p.width/p.height)>0.1}if(s){p.opacity=0}o.scaleX=o.width/p.width;o.scaleY=o.height/p.height;o.width=p.width;o.height=p.height;g.fancybox.setTranslate(u.$content,o);g.fancybox.animate(u.$content,p,q,r);return true}if(y&&q){if(t===true){setTimeout(r,q)}else{g.fancybox.animate(u.$slide.removeClass("fancybox-slide--current"),"fancybox-animated fancybox-slide--previous fancybox-fx-"+y,q,r)}}else{r()}return true},cleanUp:function(q){var p=this,o;p.current.$slide.trigger("onReset");p.$refs.container.empty().remove();p.trigger("afterClose",q);if(p.$lastFocus&&!!!p.current.focusBack){p.$lastFocus.focus()}p.current=null;o=g.fancybox.getInstance();if(o){o.activate()}else{l.scrollTop(p.scrollTop).scrollLeft(p.scrollLeft);g("html").removeClass("fancybox-enabled");g("#fancybox-style-noscroll").remove()}},trigger:function(r,o){var q=Array.prototype.slice.call(arguments,1),p=this,t=o&&o.opts?o:p.current,s;if(t){q.unshift(t)}else{t=p}q.unshift(p);if(g.isFunction(t.opts[r])){s=t.opts[r].apply(t,q)}if(s===false){return s}if(r==="afterClose"){i.trigger(r+".fb",q)}else{p.$refs.container.trigger(r+".fb",q)}},updateControls:function(s){var p=this;var t=p.current;var q=t.index;var r=t.opts;var o=r.caption;var u=p.$refs.caption;t.$slide.trigger("refresh");p.$caption=o&&o.length?u.html(o):null;if(!p.isHiddenControls){p.showControls()}g("[data-fancybox-count]").html(p.group.length);g("[data-fancybox-index]").html(q+1);g("[data-fancybox-prev]").prop("disabled",(!r.loop&&q<=0));g("[data-fancybox-next]").prop("disabled",(!r.loop&&q>=p.group.length-1))},hideControls:function(){this.isHiddenControls=true;this.$refs.container.removeClass("fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav")},showControls:function(){var o=this;var p=o.current?o.current.opts:o.opts;var q=o.$refs.container;o.isHiddenControls=false;o.idleSecondsCounter=0;q.toggleClass("fancybox-show-toolbar",!!(p.toolbar&&p.buttons)).toggleClass("fancybox-show-infobar",!!(p.infobar&&o.group.length>1)).toggleClass("fancybox-show-nav",!!(p.arrows&&o.group.length>1)).toggleClass("fancybox-is-modal",!!p.modal);if(o.$caption){q.addClass("fancybox-show-caption ")}else{q.removeClass("fancybox-show-caption")}},toggleControls:function(){if(this.isHiddenControls){this.showControls()}else{this.hideControls()}},});g.fancybox={version:"{fancybox-version}",defaults:f,getInstance:function(q){var o=g('.fancybox-container:not(".fancybox-is-closing"):first').data("FancyBox");var p=Array.prototype.slice.call(arguments,1);if(o instanceof b){if(g.type(q)==="string"){o[q].apply(o,p)}else{if(g.type(q)==="function"){q.apply(o,p)}}return o}return false},open:function(o,q,p){return new b(o,q,p)},close:function(p){var o=this.getInstance();if(o){o.close();if(p===true){this.close()}}},destroy:function(){this.close(true);i.off("click.fb-start")},isMobile:m.createTouch!==d&&/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),use3d:(function(){var o=m.createElement("div");return k.getComputedStyle&&k.getComputedStyle(o).getPropertyValue("transform")&&!(m.documentMode&&m.documentMode<11)}()),getTranslate:function(q){var o;if(!q||!q.length){return false}o=q.eq(0).css("transform");if(o&&o.indexOf("matrix")!==-1){o=o.split("(")[1];o=o.split(")")[0];o=o.split(",")}else{o=[]}if(o.length){if(o.length>10){o=[o[13],o[12],o[0],o[5]]}else{o=[o[5],o[4],o[0],o[3]]}o=o.map(parseFloat)}else{o=[0,0,1,1];var p=/\.*translate\((.*)px,(.*)px\)/i;var r=p.exec(q.eq(0).attr("style"));if(r){o[0]=parseFloat(r[2]);o[1]=parseFloat(r[1])}}return{top:o[0],left:o[1],scaleX:o[2],scaleY:o[3],opacity:parseFloat(q.css("opacity")),width:q.width(),height:q.height()}},setTranslate:function(p,q){var r="";var o={};if(!p||!q){return}if(q.left!==d||q.top!==d){r=(q.left===d?p.position().left:q.left)+"px, "+(q.top===d?p.position().top:q.top)+"px";if(this.use3d){r="translate3d("+r+", 0px)"}else{r="translate("+r+")"}}if(q.scaleX!==d&&q.scaleY!==d){r=(r.length?r+" ":"")+"scale("+q.scaleX+", "+q.scaleY+")"}if(r.length){o.transform=r}if(q.opacity!==d){o.opacity=q.opacity}if(q.width!==d){o.width=q.width}if(q.height!==d){o.height=q.height}return p.css(o)},animate:function(o,t,r,s,p){var q=a||"transitionend";if(g.isFunction(r)){s=r;r=null}if(!g.isPlainObject(t)){o.removeAttr("style")}o.on(q,function(u){if(u&&u.originalEvent&&(!o.is(u.originalEvent.target)||u.originalEvent.propertyName=="z-index")){return}o.off(q);if(g.isPlainObject(t)){if(t.scaleX!==d&&t.scaleY!==d){o.css("transition-duration","0ms");t.width=o.width()*t.scaleX;t.height=o.height()*t.scaleY;t.scaleX=1;t.scaleY=1;g.fancybox.setTranslate(o,t)}}else{if(p!==true){o.removeClass(t)}}if(g.isFunction(s)){s(u)}});if(g.isNumeric(r)){o.css("transition-duration",r+"ms")}if(g.isPlainObject(t)){g.fancybox.setTranslate(o,t)}else{o.addClass(t)}o.data("timer",setTimeout(function(){o.trigger("transitionend")},r+16))},stop:function(o){clearTimeout(o.data("timer"));o.off(a)}};function h(t){var s=t.currentTarget,q=t.data?t.data.options:{},o=t.data?t.data.items:[],r=g(s).attr("data-fancybox")||"",p=0;t.preventDefault();t.stopPropagation();if(r){o=o.length?o.filter('[data-fancybox="'+r+'"]'):g('[data-fancybox="'+r+'"]');p=o.index(s);if(p<0){p=0}}else{o=[s]}g.fancybox.open(o,q,p)}g.fn.fancybox=function(p){var o;p=p||{};o=p.selector||false;if(o){g("body").off("click.fb-start",o).on("click.fb-start",o,{items:g(o),options:p},h)}else{this.off("click.fb-start").on("click.fb-start",{items:this,options:p},h)}return this};i.on("click.fb-start","[data-fancybox]",h)}(window,document,window.jQuery));(function(h,i,f){var c=(function(){return h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||h.oRequestAnimationFrame||function(l){return h.setTimeout(l,1000/60)}})();var g=(function(){return h.cancelAnimationFrame||h.webkitCancelAnimationFrame||h.mozCancelAnimationFrame||h.oCancelAnimationFrame||function(l){h.clearTimeout(l)}})();var k=function(n){var l=[];n=n.originalEvent||n||h.e;n=n.touches&&n.touches.length?n.touches:(n.changedTouches&&n.changedTouches.length?n.changedTouches:[n]);for(var m in n){if(n[m].pageX){l.push({x:n[m].pageX,y:n[m].pageY})}else{if(n[m].clientX){l.push({x:n[m].clientX,y:n[m].clientY})}}}return l};var a=function(l,m,n){if(!m||!l){return 0}if(n==="x"){return l.x-m.x}else{if(n==="y"){return l.y-m.y}}return Math.sqrt(Math.pow(l.x-m.x,2)+Math.pow(l.y-m.y,2))};var d=function(m){if(m.is("a,button,input,select,textarea")||f.isFunction(m.get(0).onclick)){return true}for(var l=0,p=m[0].attributes,o=p.length;l<o;l++){if(p[l].nodeName.substr(0,14)==="data-fancybox-"){return true}}return false};var b=function(p){var m=h.getComputedStyle(p)["overflow-y"];var o=h.getComputedStyle(p)["overflow-x"];var n=(m==="scroll"||m==="auto")&&p.scrollHeight>p.clientHeight;var l=(o==="scroll"||o==="auto")&&p.scrollWidth>p.clientWidth;return n||l};var e=function(l){var m=false;while(true){m=b(l.get(0));if(m){break}l=l.parent();if(!l.length||l.hasClass("fancybox-stage")||l.is("body")){break}}return m};var j=function(l){var m=this;m.instance=l;m.$bg=l.$refs.bg;m.$stage=l.$refs.stage;m.$container=l.$refs.container;m.destroy();m.$container.on("touchstart.fb.touch mousedown.fb.touch",f.proxy(m,"ontouchstart"))};j.prototype.destroy=function(){this.$container.off(".fb.touch")};j.prototype.ontouchstart=function(r){var n=this;var m=f(r.target);var l=n.instance;var q=l.current;var p=q.$content;var o=(r.type=="touchstart");if(o){n.$container.off("mousedown.fb.touch")}if(!q||n.instance.isAnimating||n.instance.isClosing){r.stopPropagation();r.preventDefault();return}if(r.originalEvent&&r.originalEvent.button==2){return}if(!m.length||d(m)||d(m.parent())){return}if(r.originalEvent.clientX>m[0].clientWidth+m.offset().left){return}n.startPoints=k(r);if(!n.startPoints||(n.startPoints.length>1&&l.isSliding)){return}n.$target=m;n.$content=p;n.canTap=true;f(i).off(".fb.touch");f(i).on(o?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",f.proxy(n,"ontouchend"));f(i).on(o?"touchmove.fb.touch":"mousemove.fb.touch",f.proxy(n,"ontouchmove"));r.stopPropagation();if(!(l.current.opts.touch||l.canPan())||!(m.is(n.$stage)||n.$stage.find(m).length)){if(m.is("img")){r.preventDefault()}return}if(!(f.fancybox.isMobile&&(e(n.$target)||e(n.$target.parent())))){r.preventDefault()}n.canvasWidth=Math.round(q.$slide[0].clientWidth);n.canvasHeight=Math.round(q.$slide[0].clientHeight);n.startTime=new Date().getTime();n.distanceX=n.distanceY=n.distance=0;n.isPanning=false;n.isSwiping=false;n.isZooming=false;n.sliderStartPos=n.sliderLastPos||{top:0,left:0};n.contentStartPos=f.fancybox.getTranslate(n.$content);n.contentLastPos=null;if(n.startPoints.length===1&&!n.isZooming){n.canTap=!l.isSliding;if(q.type==="image"&&(n.contentStartPos.width>n.canvasWidth+1||n.contentStartPos.height>n.canvasHeight+1)){f.fancybox.stop(n.$content);n.$content.css("transition-duration","0ms");n.isPanning=true}else{n.isSwiping=true}n.$container.addClass("fancybox-controls--isGrabbing")}if(n.startPoints.length===2&&!l.isAnimating&&!q.hasError&&q.type==="image"&&(q.isLoaded||q.$ghost)){n.isZooming=true;n.isSwiping=false;n.isPanning=false;f.fancybox.stop(n.$content);n.$content.css("transition-duration","0ms");n.centerPointStartX=((n.startPoints[0].x+n.startPoints[1].x)*0.5)-f(h).scrollLeft();n.centerPointStartY=((n.startPoints[0].y+n.startPoints[1].y)*0.5)-f(h).scrollTop();n.percentageOfImageAtPinchPointX=(n.centerPointStartX-n.contentStartPos.left)/n.contentStartPos.width;n.percentageOfImageAtPinchPointY=(n.centerPointStartY-n.contentStartPos.top)/n.contentStartPos.height;n.startDistanceBetweenFingers=a(n.startPoints[0],n.startPoints[1])}};j.prototype.ontouchmove=function(m){var l=this;l.newPoints=k(m);if(f.fancybox.isMobile&&(e(l.$target)||e(l.$target.parent()))){m.stopPropagation();l.canTap=false;return}if(!(l.instance.current.opts.touch||l.instance.canPan())||!l.newPoints||!l.newPoints.length){return}l.distanceX=a(l.newPoints[0],l.startPoints[0],"x");l.distanceY=a(l.newPoints[0],l.startPoints[0],"y");l.distance=a(l.newPoints[0],l.startPoints[0]);if(l.distance>0){if(!(l.$target.is(l.$stage)||l.$stage.find(l.$target).length)){return}m.stopPropagation();m.preventDefault();if(l.isSwiping){l.onSwipe()}else{if(l.isPanning){l.onPan()}else{if(l.isZooming){l.onZoom()}}}}};j.prototype.onSwipe=function(){var m=this;var l=m.isSwiping;var n=m.sliderStartPos.left||0;var o;if(l===true){if(Math.abs(m.distance)>10){m.canTap=false;if(m.instance.group.length<2&&m.instance.opts.touch.vertical){m.isSwiping="y"}else{if(m.instance.isSliding||m.instance.opts.touch.vertical===false||(m.instance.opts.touch.vertical==="auto"&&f(h).width()>800)){m.isSwiping="x"}else{o=Math.abs(Math.atan2(m.distanceY,m.distanceX)*180/Math.PI);m.isSwiping=(o>45&&o<135)?"y":"x"}}m.instance.isSliding=m.isSwiping;m.startPoints=m.newPoints;f.each(m.instance.slides,function(q,p){f.fancybox.stop(p.$slide);p.$slide.css("transition-duration","0ms");p.inTransition=false;if(p.pos===m.instance.current.pos){m.sliderStartPos.left=f.fancybox.getTranslate(p.$slide).left}});if(m.instance.SlideShow&&m.instance.SlideShow.isActive){m.instance.SlideShow.stop()}}}else{if(l=="x"){if(m.distanceX>0&&(m.instance.group.length<2||(m.instance.current.index===0&&!m.instance.current.opts.loop))){n=n+Math.pow(m.distanceX,0.8)}else{if(m.distanceX<0&&(m.instance.group.length<2||(m.instance.current.index===m.instance.group.length-1&&!m.instance.current.opts.loop))){n=n-Math.pow(-m.distanceX,0.8)}else{n=n+m.distanceX}}}m.sliderLastPos={top:l=="x"?0:m.sliderStartPos.top+m.distanceY,left:n};if(m.requestId){g(m.requestId);m.requestId=null}m.requestId=c(function(){if(m.sliderLastPos){f.each(m.instance.slides,function(q,p){var r=p.pos-m.instance.currPos;f.fancybox.setTranslate(p.$slide,{top:m.sliderLastPos.top,left:m.sliderLastPos.left+(r*m.canvasWidth)+(r*p.opts.gutter)})});m.$container.addClass("fancybox-is-sliding")}})}};j.prototype.onPan=function(){var l=this;var o,n,m;l.canTap=false;if(l.contentStartPos.width>l.canvasWidth){o=l.contentStartPos.left+l.distanceX}else{o=l.contentStartPos.left}n=l.contentStartPos.top+l.distanceY;m=l.limitMovement(o,n,l.contentStartPos.width,l.contentStartPos.height);m.scaleX=l.contentStartPos.scaleX;m.scaleY=l.contentStartPos.scaleY;l.contentLastPos=m;if(l.requestId){g(l.requestId);l.requestId=null}l.requestId=c(function(){f.fancybox.setTranslate(l.$content,l.contentLastPos)})};j.prototype.limitMovement=function(v,s,p,l){var z=this;var o,n,w,u;var m=z.canvasWidth;var q=z.canvasHeight;var t=z.contentStartPos.left;var r=z.contentStartPos.top;var y=z.distanceX;var x=z.distanceY;o=Math.max(0,m*0.5-p*0.5);n=Math.max(0,q*0.5-l*0.5);w=Math.min(m-p,m*0.5-p*0.5);u=Math.min(q-l,q*0.5-l*0.5);if(p>m){if(y>0&&v>o){v=o-1+Math.pow(-o+t+y,0.8)||0}if(y<0&&v<w){v=w+1-Math.pow(w-t-y,0.8)||0}}if(l>q){if(x>0&&s>n){s=n-1+Math.pow(-n+r+x,0.8)||0}if(x<0&&s<u){s=u+1-Math.pow(u-r-x,0.8)||0}}return{top:s,left:v}};j.prototype.limitPosition=function(r,p,q,m){var n=this;var l=n.canvasWidth;var o=n.canvasHeight;if(q>l){r=r>0?0:r;r=r<l-q?l-q:r}else{r=Math.max(0,l/2-q/2)}if(m>o){p=p>0?0:p;p=p<o-m?o-m:p}else{p=Math.max(0,o/2-m/2)}return{top:p,left:r}};j.prototype.onZoom=function(){var t=this;var q=t.contentStartPos.width;var o=t.contentStartPos.height;var y=t.contentStartPos.left;var x=t.contentStartPos.top;var w=a(t.newPoints[0],t.newPoints[1]);var p=w/t.startDistanceBetweenFingers;var r=Math.floor(q*p);var v=Math.floor(o*p);var m=(q-r)*t.percentageOfImageAtPinchPointX;var l=(o-v)*t.percentageOfImageAtPinchPointY;var C=((t.newPoints[0].x+t.newPoints[1].x)/2)-f(h).scrollLeft();var A=((t.newPoints[0].y+t.newPoints[1].y)/2)-f(h).scrollTop();var u=C-t.centerPointStartX;var s=A-t.centerPointStartY;var B=y+(m+u);var z=x+(l+s);var n={top:z,left:B,scaleX:t.contentStartPos.scaleX*p,scaleY:t.contentStartPos.scaleY*p};t.canTap=false;t.newWidth=r;t.newHeight=v;t.contentLastPos=n;if(t.requestId){g(t.requestId);t.requestId=null}t.requestId=c(function(){f.fancybox.setTranslate(t.$content,t.contentLastPos)})};j.prototype.ontouchend=function(q){var n=this;var m=Math.max((new Date().getTime())-n.startTime,1);var l=n.isSwiping;var o=n.isPanning;var p=n.isZooming;n.endPoints=k(q);n.$container.removeClass("fancybox-controls--isGrabbing");f(i).off(".fb.touch");if(n.requestId){g(n.requestId);n.requestId=null}n.isSwiping=false;n.isPanning=false;n.isZooming=false;if(n.canTap){return n.onTap(q)}n.speed=366;n.velocityX=n.distanceX/m*0.5;n.velocityY=n.distanceY/m*0.5;n.speedX=Math.max(n.speed*0.5,Math.min(n.speed*1.5,(1/Math.abs(n.velocityX))*n.speed));if(o){n.endPanning()}else{if(p){n.endZooming()}else{n.endSwiping(l)}}return};j.prototype.endSwiping=function(l){var m=this;var n=false;m.instance.isSliding=false;m.sliderLastPos=null;if(l=="y"&&Math.abs(m.distanceY)>50){f.fancybox.animate(m.instance.current.$slide,{top:m.sliderStartPos.top+m.distanceY+(m.velocityY*150),opacity:0},150);n=m.instance.close(true,300)}else{if(l=="x"&&m.distanceX>50&&m.instance.group.length>1){n=m.instance.previous(m.speedX)}else{if(l=="x"&&m.distanceX<-50&&m.instance.group.length>1){n=m.instance.next(m.speedX)}}}if(n===false&&(l=="x"||l=="y")){m.instance.jumpTo(m.instance.current.index,150)}m.$container.removeClass("fancybox-is-sliding")};j.prototype.endPanning=function(){var l=this;var o,n,m;if(!l.contentLastPos){return}if(l.instance.current.opts.touch.momentum===false){o=l.contentLastPos.left;n=l.contentLastPos.top}else{o=l.contentLastPos.left+(l.velocityX*l.speed);n=l.contentLastPos.top+(l.velocityY*l.speed)}m=l.limitPosition(o,n,l.contentStartPos.width,l.contentStartPos.height);m.width=l.contentStartPos.width;m.height=l.contentStartPos.height;f.fancybox.animate(l.$content,m,330)};j.prototype.endZooming=function(){var m=this;var s=m.instance.current;var r,o,n,q;var p=m.newWidth;var l=m.newHeight;if(!m.contentLastPos){return}r=m.contentLastPos.left;o=m.contentLastPos.top;q={top:o,left:r,width:p,height:l,scaleX:1,scaleY:1};f.fancybox.setTranslate(m.$content,q);if(p<m.canvasWidth&&l<m.canvasHeight){m.instance.scaleToFit(150)}else{if(p>s.width||l>s.height){m.instance.scaleToActual(m.centerPointStartX,m.centerPointStartY,150)}else{n=m.limitPosition(r,o,p,l);f.fancybox.setTranslate(m.content,f.fancybox.getTranslate(m.$content));f.fancybox.animate(m.$content,n,150)}}};j.prototype.onTap=function(q){var t=this;var o=f(q.target);var s=t.instance;var r=s.current;var n=(q&&k(q))||t.startPoints;var l=n[0]?n[0].x-t.$stage.offset().left:0;var u=n[0]?n[0].y-t.$stage.offset().top:0;var p;var m=function(w){var v=r.opts[w];if(f.isFunction(v)){v=v.apply(s,[r,q])}if(!v){return}switch(v){case"close":s.close(t.startEvent);break;case"toggleControls":s.toggleControls(true);break;case"next":s.next();break;case"nextOrClose":if(s.group.length>1){s.next()}else{s.close(t.startEvent)}break;case"zoom":if(r.type=="image"&&(r.isLoaded||r.$ghost)){if(s.canPan()){s.scaleToFit()}else{if(s.isScaledDown()){s.scaleToActual(l,u)}else{if(s.group.length<2){s.close(t.startEvent)}}}}break}};if(q.originalEvent&&q.originalEvent.button==2){return}if(s.isSliding){return}if(l>o[0].clientWidth+o.offset().left){return}if(o.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container")){p="Outside"}else{if(o.is(".fancybox-slide")){p="Slide"}else{if(s.current.$content&&s.current.$content.has(q.target).length){p="Content"}else{return}}}if(t.tapped){clearTimeout(t.tapped);t.tapped=null;if(Math.abs(l-t.tapX)>50||Math.abs(u-t.tapY)>50||s.isSliding){return this}m("dblclick"+p)}else{t.tapX=l;t.tapY=u;if(r.opts["dblclick"+p]&&r.opts["dblclick"+p]!==r.opts["click"+p]){t.tapped=setTimeout(function(){t.tapped=null;m("click"+p)},300)}else{m("click"+p)}}return this};f(i).on("onActivate.fb",function(m,l){if(l&&!l.Guestures){l.Guestures=new j(l)}});f(i).on("beforeClose.fb",function(m,l){if(l&&l.Guestures){l.Guestures.destroy()}})}(window,document,window.jQuery));(function(b,d){var c=(function(){var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var k;var g={};var h,f;for(h=0;h<e.length;h++){k=e[h];if(k&&k[1] in b){for(f=0;f<k.length;f++){g[e[0][f]]=k[f]}return g}}return false})();if(!c){d.fancybox.defaults.btnTpl.fullScreen=false;return}var a={request:function(e){e=e||b.documentElement;e[c.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){b[c.exitFullscreen]()},toggle:function(e){e=e||b.documentElement;if(this.isFullscreen()){this.exit()}else{this.request(e)}},isFullscreen:function(){return Boolean(b[c.fullscreenElement])},enabled:function(){return Boolean(b[c.fullscreenEnabled])}};d(b).on({"onInit.fb":function(h,f){var i;var g=f.$refs.toolbar.find("[data-fancybox-fullscreen]");if(f&&!f.FullScreen&&f.group[f.currIndex].opts.fullScreen){i=f.$refs.container;i.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(j){j.stopPropagation();j.preventDefault();a.toggle(i[0])});if(f.opts.fullScreen&&f.opts.fullScreen.autoStart===true){a.request(i[0])}f.FullScreen=a}else{g.hide()}},"afterKeydown.fb":function(j,g,i,h,f){if(g&&g.FullScreen&&f===70){h.preventDefault();g.FullScreen.toggle(g.$refs.container[0])}},"beforeClose.fb":function(e){if(e&&e.FullScreen){a.exit()}}});d(b).on(c.fullscreenchange,function(){var e=d.fancybox.getInstance();if(e.current&&e.current.type==="image"&&e.isAnimating){e.current.$content.css("transition","none");e.isAnimating=false;e.update(true,true,0)}})}(document,window.jQuery));(function(a,c){var b=function(d){this.instance=d;this.init()};c.extend(b.prototype,{$button:null,$grid:null,$list:null,isVisible:false,init:function(){var d=this;var f=d.instance.group[0],e=d.instance.group[1];d.$button=d.instance.$refs.toolbar.find("[data-fancybox-thumbs]");if(d.instance.group.length>1&&d.instance.group[d.instance.currIndex].opts.thumbs&&((f.type=="image"||f.opts.thumb||f.opts.$thumb)&&(e.type=="image"||e.opts.thumb||e.opts.$thumb))){d.$button.on("click",function(){d.toggle()});d.isActive=true}else{d.$button.hide();d.isActive=false}},create:function(){var d=this.instance,e,f;this.$grid=c('<div class="fancybox-thumbs"></div>').appendTo(d.$refs.container);e="<ul>";c.each(d.group,function(g,h){f=h.opts.thumb||(h.opts.$thumb?h.opts.$thumb.attr("src"):null);if(!f&&h.type==="image"){f=h.src}if(f&&f.length){e+='<li data-index="'+g+'"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="'+f+'" /></li>'}});e+="</ul>";this.$list=c(e).appendTo(this.$grid).on("click","li",function(){d.jumpTo(c(this).data("index"))});this.$list.find("img").hide().one("load",function(){var m=c(this).parent().removeClass("fancybox-thumbs-loading"),k=m.outerWidth(),l=m.outerHeight(),j,g,i,h;j=this.naturalWidth||this.width;g=this.naturalHeight||this.height;i=j/k;h=g/l;if(i>=1&&h>=1){if(i>h){j=j/h;g=l}else{j=k;g=g/i}}c(this).css({width:Math.floor(j),height:Math.floor(g),"margin-top":Math.min(0,Math.floor(l*0.3-g*0.3)),"margin-left":Math.min(0,Math.floor(k*0.5-j*0.5))}).show()}).each(function(){this.src=c(this).data("src")})},focus:function(){if(this.instance.current){this.$list.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+this.instance.current.index+'"]').addClass("fancybox-thumbs-active").focus()}},close:function(){this.$grid.hide()},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible);if(this.isVisible){if(!this.$grid){this.create()}this.instance.trigger("onThumbsShow");this.focus()}else{if(this.$grid){this.instance.trigger("onThumbsHide")}}this.instance.update()},hide:function(){this.isVisible=false;this.update()},show:function(){this.isVisible=true;this.update()},toggle:function(){this.isVisible=!this.isVisible;this.update()}});c(a).on({"onInit.fb":function(f,d){if(d&&!d.Thumbs){d.Thumbs=new b(d)}},"beforeShow.fb":function(i,f,g,h){var d=f&&f.Thumbs;if(!d||!d.isActive){return}if(g.modal){d.$button.hide();d.hide();return}if(h&&f.opts.thumbs.autoStart===true){d.show()}if(d.isVisible){d.focus()}},"afterKeydown.fb":function(j,g,i,h,f){var d=g&&g.Thumbs;if(d&&d.isActive&&f===71){h.preventDefault();d.toggle()}},"beforeClose.fb":function(g,f){var d=f&&f.Thumbs;if(d&&d.isVisible&&f.opts.thumbs.hideOnClose!==false){d.close()}}})}(document,window.jQuery));
//для видео в попапе fancybox - работает только на сервере
!function(d){"use strict";var o={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"//www.youtube-nocookie.com/embed/$4",thumb:"//img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(e){return"//maps.google."+e[2]+"/?ll="+(e[9]?e[9]+"&z="+Math.floor(e[10])+(e[12]?e[12].replace(/^\//,"&"):""):e[12]+"").replace(/\?/,"&")+"&output="+(e[12]&&0<e[12].indexOf("layer=c")?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(e){return"//maps.google."+e[2]+"/maps?q="+e[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}},h=function(a,e,t){if(a)return t=t||"","object"===d.type(t)&&(t=d.param(t,!0)),d.each(e,function(e,t){a=a.replace("$"+e,t||"")}),t.length&&(a+=(0<a.indexOf("?")?"&":"?")+t),a};d(document).on("objectNeedsType.fb",function(e,t,n){var a,r,i,c,u,m,p,l=n.src||"",s=!1;a=d.extend(!0,{},o,n.opts.media),d.each(a,function(e,t){if(i=l.match(t.matcher)){if(s=t.type,p=e,m={},t.paramPlace&&i[t.paramPlace]){"?"==(u=i[t.paramPlace])[0]&&(u=u.substring(1)),u=u.split("&");for(var a=0;a<u.length;++a){var o=u[a].split("=",2);2==o.length&&(m[o[0]]=decodeURIComponent(o[1].replace(/\+/g," ")))}}return c=d.extend(!0,{},t.params,n.opts[e],m),l="function"===d.type(t.url)?t.url.call(this,i,c,n):h(t.url,i,c),r="function"===d.type(t.thumb)?t.thumb.call(this,i,c,n):h(t.thumb,i),"youtube"===e?l=l.replace(/&t=((\d+)m)?(\d+)s/,function(e,t,a,o){return"&start="+((a?60*parseInt(a,10):0)+parseInt(o,10))}):"vimeo"===e&&(l=l.replace("&%23","#")),!1}}),s?(n.opts.thumb||n.opts.$thumb&&n.opts.$thumb.length||(n.opts.thumb=r),"iframe"===s&&(n.opts=d.extend(!0,n.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),d.extend(n,{type:s,src:l,origSrc:n.src,contentSource:p,contentType:"image"===s?"image":"gmap_place"==p||"gmap_search"==p?"map":"video"})):l&&(n.type=n.opts.defaultType)});var n={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(e){var t,a=this;this[e].loaded?setTimeout(function(){a.done(e)}):this[e].loading||(this[e].loading=!0,(t=document.createElement("script")).type="text/javascript",t.src=this[e].src,"youtube"===e?window.onYouTubeIframeAPIReady=function(){a[e].loaded=!0,a.done(e)}:t.onload=function(){a[e].loaded=!0,a.done(e)},document.body.appendChild(t))},done:function(e){var t,a;"youtube"===e&&delete window.onYouTubeIframeAPIReady,(t=d.fancybox.getInstance())&&(a=t.current.$content.find("iframe"),"youtube"===e&&void 0!==YT&&YT?new YT.Player(a.attr("id"),{events:{onStateChange:function(e){0==e.data&&t.next()}}}):"vimeo"===e&&void 0!==Vimeo&&Vimeo&&new Vimeo.Player(a).on("ended",function(){t.next()}))}};d(document).on({"afterShow.fb":function(e,t,a){1<t.group.length&&("youtube"===a.contentSource||"vimeo"===a.contentSource)&&n.load(a.contentSource)}})}(jQuery);